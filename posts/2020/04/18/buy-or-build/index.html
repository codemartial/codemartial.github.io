<!doctype html><html lang=en-gb><head><meta charset=utf-8><meta name=viewport content="width=device-width"><title>Buy or Build?, by Tahir Hashmi</title><meta name=description content><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#da532c"><meta name=theme-color content="#ffffff"><link rel=canonical href=https://tahirhashmi.com/posts/2020/04/18/buy-or-build/><meta property="og:title" content="Buy or Build?"><meta property="og:description" content="One of the decisions a CTO has to frequently make is whether to build some piece of functionality in-house or buy it from a third party vendor. In this post, I share my framework for making these decisions.
I also include a case study each for a buy decision and a build decision. Added bonus – some thoughts on whether you should sell something you’ve decided to build.
Functional Complexity One of the most important determinants of buy-vs-build decisions will be the ability to spec out the entire functionality."><meta property="og:type" content="article"><meta property="og:url" content="https://tahirhashmi.com/posts/2020/04/18/buy-or-build/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2020-04-18T06:58:04+00:00"><meta property="article:modified_time" content="2023-03-22T20:29:26+07:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Buy or Build?"><meta name=twitter:description content="One of the decisions a CTO has to frequently make is whether to build some piece of functionality in-house or buy it from a third party vendor. In this post, I share my framework for making these decisions.
I also include a case study each for a buy decision and a build decision. Added bonus – some thoughts on whether you should sell something you’ve decided to build.
Functional Complexity One of the most important determinants of buy-vs-build decisions will be the ability to spec out the entire functionality."><meta itemprop=name content="Buy or Build?"><meta itemprop=description content="One of the decisions a CTO has to frequently make is whether to build some piece of functionality in-house or buy it from a third party vendor. In this post, I share my framework for making these decisions.
I also include a case study each for a buy decision and a build decision. Added bonus – some thoughts on whether you should sell something you’ve decided to build.
Functional Complexity One of the most important determinants of buy-vs-build decisions will be the ability to spec out the entire functionality."><meta itemprop=datePublished content="2020-04-18T06:58:04+00:00"><meta itemprop=dateModified content="2023-03-22T20:29:26+07:00"><meta itemprop=wordCount content="2452"><meta itemprop=keywords content><link rel=alternate type=application/rss+xml href=https://tahirhashmi.com/posts/index.xml title="Tahir Hashmi"><link rel=stylesheet href=/assets/css/main.min.b2c12bad96fd15efcbfc37e21ebae08ed0baea4b512e4f98b3ef63db6c6e8652.css media=all><link rel=preload as=font href=/fonts/Probert.woff2 type=font/woff2 crossorigin=anonymous><link rel=preload as=font href=/fonts/ProbertBold.woff2 type=font/woff2 crossorigin=anonymous><link rel=preload as=font href=/fonts/Oxanium.woff2 type=font/woff2 crossorigin=anonymous><link rel=preload as=font href=/fonts/BerkeleyMonoVariable-Regular.woff2 type=font/woff2 crossorigin=anonymous><script defer src=/assets/js/main.min.35e33a864dbe04f338d5c5bb84090b1891b3f1dd3c2b651aa0317abcffc176b5.js></script></head><body class=page><div id=headline><h1>Buy or Build?</h1></div><div id=content><main><article><time datetime="2020-04-18 06:58:04 +0000 UTC" itemprop=datePublished>April 18, 2020</time><p>One of the decisions a CTO has to frequently make is whether to build some piece of functionality in-house or buy it from a third party vendor. In this post, I share my framework for making these decisions.</p><p>I also include a case study each for a buy decision and a build decision. Added bonus – some thoughts on whether you should sell something you’ve decided to build.</p><h2 id=functional-complexity>Functional Complexity</h2><p>One of the most important determinants of buy-vs-build decisions will be the ability to spec out the entire functionality. Often we know what the primary functionality should be – e.g. being able to show metrics on a graph (a monitoring solution). The devil is in the details, though, and spending some time in discovering peripheral functionality is very helpful in avoiding a situation where you jump head-first into building something seemingly simple and then get stuck.</p><p>E.g. how does the monitoring solution handle server-churn for the services it is monitoring? Does it rerun the entire query when auto-refresh is turned on? etc.</p><p>One effective way to discover peripheral functionality is to look across competing products that offer the solution and see how they differentiate themselves from competitors. Each of those differentiators is functionality that is relevant to <em>some</em> customer, and could be relevant to you as well.</p><h2 id=technical-complexity>Technical Complexity</h2><p>Knowing what to build (functionality) is a starting point. The next is to understand whether you have the capability to build that functionality. It’s not uncommon to find that functionally complex products are not technically complex and vice-versa. Functional complexity really arises out of the uncertainty in specifying the desired behaviour in a way that is known to be easy to code.</p><p>Technical complexity arises out of the ability to meet the functional requirements in repeatable and reliable ways. E.g. interactive information retrieval remains a technically complex domain despite years and years of R&amp;D into the field. The business requirements and scale requirements keep growing to outpace any simplifying developments that have taken place in the field.</p><p>Having said that, this is one of the less difficult criteria for evaluation. Provided you have a good enough understanding of the functional complexity, you know whether you have the skills to build it in-house or whether you can hire to build the skill-set.</p><h2 id=operational-complexity>Operational Complexity</h2><p>Things that are easy to build could be deceptively difficult to operate. Keeping something running reliably with predictable performance under stress is especially hard.</p><p>Having spent the last 10+ years handling “discount sale” events for book publishers to game engines to e-commerce platforms, I have a special distaste for all the F/OSS technology that works beautifully at small scale, only to blow up spectacularly under high load at a time when the business critically depends on it to hold up well.</p><p>And therein is a signal for you to understand whether DIY might be a good idea. If you see a product for which there’s no shortage of F/OSS offerings, yet there are “enterprise” offerings that are highly profitable, it’s a strong indicator of operational complexity.</p><p>In general, if you want to treat some technology as a black box, don’t use F/OSS [that you operate yourself]. If you’re operating something on your own, it’s best if you have built it or you have the ability to benefit from the <em>openness</em> of its source and understand exactly how it works under the hood. Another alternative is to understand its behaviour <em>empirically</em> by stressing it beyond your foreseeable requirements and figuring out how you’ll handle its failures. Both of these – understanding through code or empirical behaviour – are expensive propositions.</p><h2 id=unique-business-value>Unique Business Value</h2><p>The last evaluation criteria (but not the least important by any means) is how the component you’re to buy or build acts as a differentiator for your business.</p><p>The <em>differentiator</em> consideration is extremely important. I’ve been in many situations where people argue that we should build something in-house because it’s business-critical. Well, Internet is business-critical but pretty much no one is building their own telco network, are they?</p><p>There is a very dire consequence of deciding to build something that is not a differentiator for your business – lack of long term investment into the component. When deciding to staff a team, the business will always prefer to allocate more to components or teams where they can see a clear, tangible business benefit. The less that a component contributes to business differentiation, the less focus it will have from a staffing perspective.</p><p>Soon you’ll find that the component that was cutting-edge at the time you built it has turned into a dinosaur few years down the line while the state-of-the-art has progressed much further, potentially becoming even more cost effective.</p><h2 id=how-to-measure-cost-in-buy-vs-build>How to measure cost in Buy vs. Build</h2><p>Here’s a retrospective mini-game for your decision-making maturity on cost comparisons. You’ve already played this before. Now see what level you’ve landed at.</p><p><strong>Level 1. Technology Cost:</strong> You compare the cost of servers and other operational components and see how much you might save.</p><p><strong>Level 2. Staffing Cost:</strong> You throw in the CTC of the developers who will be building and operating the component.</p><p><strong>Level 3. Business Development Cost:</strong> Now this is a bit tricky. If you allocate the budget from Level 2 cost (i.e. your sharp engineers) to building direct business value how much additional revenue would you gain? If you pull existing engineers who are directly building business value, how much revenue would you lose? For a high growth startup that’s still executing on its product plan, this cost could be really high.</p><p><strong>Level 4. Loss of Business Cost:</strong> This is even more tricky than Level 3 and requires comparing monetary impact of SLAs and Quality of Service. Things to consider here include impact on revenue per minute if the component fails and impact on revenue if the component degrades in performance or reliability. Loss of revenue due to reduced engineering and business productivity due to poor performance is another cost factor.</p><p><strong>Level 5. Business Opportunity Cost:</strong> This is the most interesting aspect of making a buy vs. build decision. In a nutshell, it captures the impact of lack of investment (build) or control (buy) in the evolution of the product under consideration. It’s also closely tied to the differentiation factor. If it’s a low differentiator built in-house, the most likely future is that it will get understaffed, leading to growing Level 4 costs while the rest of the world advances in capability. In-house high differentiators have the potential to increase future differentiation to the extent that they could become sources of direct revenue.</p><h2 id=case-study-1-chat-server--build>Case Study 1: Chat Server – Build</h2><p>Not too long ago, at Tokopedia we needed to build peer-to-peer and group chat capabilities. We already had some experience with using 3rd party solutions for reference. Here’s how the above decision framework applied to this decision.</p><p><strong>Functional Complexity:</strong> chat functionality is well understood and we were able to nail down most of the core and peripheral functional requirements with clarity. This was validated against the core feature-set from 3rd party solutions.</p><p><strong>Technical Complexity:</strong> chat servers have traditionally been notoriously complicated pieces of technology to build. Keeping end-to-end latency under predictable bounds while handling hundreds of thousands of concurrent connections is a well known problem (cf. C10k or C10M Problem).</p><p>10 years ago, one of the big technology decisions used to be “which webserver”. Apache2 was the most widely deployed webserver for C/C++ or PHP while the Java folks swore by TomCat and later Jetty, etc. That was until Go (yeah, golang) arrived and suddenly the application was its own webserver. What’s more, you could use that webserver to do raw TCP I/O using <a href=https://en.wikipedia.org/wiki/WebSocket target=_blank>websockets</a>, which were supported out-of-the-box in Go before any mainstream webservers picked them up. Anyway, I digress.</p><p>One of the coolest gifts that Go has given to software development community is the <code>select statement</code>. Combined with <code>goroutines</code> and the rapid benchmarking capabilities, chat servers have become trivial (I don’t use the t-word lightly) to build with Go. Fortunately, Tokopedia is a Go shop and double-fortunately, we also had engineers who could wield this capability into a reliable working solution.</p><p><strong>Operational Complexity:</strong> Given that we decided to build our own chat server from scratch, we had full control on its behaviour and failure patterns. We could dig right down into the TCP implementation of Go if needed, leaving very little behaviour that we couldn’t understand or control. We also had a scale target to design for and we frequently ran stress tests to push the implementation. This allowed us to develop implementation and operations hand-in-hand for a low maintenance solution that could be operated with minimal overhead.</p><p><strong>Unique Business Value:</strong> Chat is one of the most crucial touch-points that a business has with their customers. Having the ability to connect the user with a business representative via chat messaging is a very basic functionality but we saw that as an opportunity to build a lot of differentiation.</p><p>Being able to build workflows over chat, being able to integrate our own business artefacts into the chat protocol and being able to control the experience end-to-end has a very high business value. We’ve been continuously enhancing our protocol to support all kinds of business use-cases. Having full control over the solution, rather than building to a 3rd party API, means that we can do the integrations at whatever level is most optimal, rather than only doing surface-level integrations.</p><p><strong>Cost:</strong> We worked through pretty-much all the levels of cost evaluation. While I can’t share a lot of data on this, we did find that our Level 1 and Level 2 costs were 10x lower at full scale for one of the use cases.</p><h2 id=case-study-2-log-platform--buy>Case Study 2: Log Platform – Buy</h2><p>Of late, one of the other considerations that we had to make at Tokopedia was on how to provide a scalable log aggregation platform that could be used across the whole company, not just for application specific logs but also being able to do cross-application analysis at high speed of interactivity. Here’s how the decision framework applied to it.</p><p><strong>Functional Complexity:</strong> On the surface, log aggregation is a well understood functionality that has limited scope. However, our prior experience and analysis of 3rd party offerings revealed important peripheral functionality such as the ability to handle instance churn in a containerised environment, highly responsive interaction, analytics and alerting on log data, etc.</p><p><strong>Technical Complexity:</strong> Technically, log aggregation can be simple or complex depending on the scope of functionality. I mentioned earlier that interactive information retrieval at scale is a complex problem. We could build log aggregators that were interactive at low volume and supported basic filters but basic log aggregation wasn’t sufficient functionality and building full scale log analytics is a technically complex problem.</p><p><strong>Operational Complexity:</strong> Given the high technical complexity, our only options were to assemble and operate a F/OSS solution as a black box. That didn’t go very well for us, mainly because understanding a log platform is extremely costly – whether as a white-box (reading the code) or empirically (understanding failures through stress testing). We didn’t want log platform maintenance to be someone’s full-time job and it wasn’t easy to keep ingestion and query times low enough to be acceptable as “real-time, interactive” performance while ingesting TBs of log data daily – <em>and</em> be able to scale it 10x for the discount sale spikes.</p><p><strong>Unique Business Value:</strong> Log aggregation and analysis is one of those components that are business-critical but not differentiators. It is extremely important to have a reliable log platform because it’s the foundation on which we build our failure-feedback during development, testing and – most importantly – production operation. However, we did not find any use cases specific to us that couldn’t be satisfied through off-the-shelf solutions. Thus the business differentiation was very low.</p><p><strong>Costs:</strong> Again, while it’s difficult to share hard numbers on this, our analysis revealed that our Level 2 through Level 5 costs would have been <em>higher</em> for an in-house solution. High enough to overcome any savings in Level 1 costs, and the gap increased with increase in scale. So we decided to go with a <a href=https://www.scalyr.com/product target=_blank>3rd party solution</a> instead.</p><h2 id=when-to-sell-what-you-build>When to Sell What You Build</h2><p>Here’s a bonus! While most of us stop after making a buy vs. build decision, the same framework used to make that decision can help in deciding whether you should sell what you’ve built. We just need a couple of extra points to consider.</p><h3 id=externally-relevant-differentiation>Externally Relevant Differentiation</h3><p>When you decide to build something that has high complexity, most likely it’s because it has high business differentiation value for you or you have done it in a way that alters the economics of third party solutions. This means that you’ve build something that is not only hard to build but is also different from existing solutions in some meaningful ways to you.</p><p>Given that your business is not operating in isolation, there may be others who might find that same kind of differentiation meaningful. So you could potentially sell your solution to other parties either commercially or as a F/OSS offering. However, there’s one more thing to validate before you make that decision.</p><h3 id=cost-of-multi-tenancy>Cost of Multi-Tenancy</h3><p>When you build a solution in-house, you do it for your company, for your use cases. Selling this solution externally means that you have to do a lot of additional work to separate out your company as a <em>tenant</em> of your solution. That’s followed by ensuring that your solution can work for multiple tenants in a way that they don’t step on each others’ toes or discover each others’ business secrets. Add to that the requirements for cost computation and usage audits and more robust end-user security.</p><p>Sometimes the cost of multi-tenancy itself becomes too high. Maybe the solution that you built turned out to be profitable <em>precisely</em> because it wasn’t multi-tenant. One of the reasons why enterprises buy enterprise solutions is because any platform in a large company inherently needs to support multi-tenancy. These companies don’t just have different teams, they have teams that belong to different business units that need to calculate their internal charge-backs for shared technology and don’t take loss of reliability due to a sister unit’s misdemeanour very lightly.</p><h2 id=conclusion>Conclusion</h2><p>I do find that different markets have different appetites to buy or build. There’s a lot of “emotional” decision-making that goes on. Functional vs. Technical complexity is often not differentiated and the wrong trade-offs between short term and long term prospects are made.</p><p>I have documented here my decision framework for making buy-vs-build decisions and I hope it helps you make better decisions. Conversely, you can help me by adding to the framework.</p></article><div style=display:flex;width:100%><div style=width:50%><p style=text-align:left>Previous Post:<br><a href=https://tahirhashmi.com/posts/2019/01/19/5-competitive-advantages-in-technology/>5 Competitive Advantages in Technology</a></p></div><div style=width:50%><p style=text-align:right>Next Post:<br><a href=https://tahirhashmi.com/posts/2020/09/10/using-a-qlc-ssd-for-backups-makes-sense/>Using a QLC SSD for Backups. Am I Insane?</a></p></div></div></main></div><div id=sidebar><nav class=sidebar-nav><ul><li><a class=sidebar-nav-item href=/posts/ title=Articles>Articles</a></li><li><a class=sidebar-nav-item href=/about/ title=About>About</a></li><li><a class=sidebar-nav-item href=/photos/ title=Photos>Photos</a></li><li><a class=sidebar-nav-item href=/categories/opinion/ title=opinion>opinion</a></li><li><a class=sidebar-nav-item href=/categories/photography/ title=photography>photography</a></li><li><a class=sidebar-nav-item href=/categories/programming/ title=programming>programming</a></li><li><a class=sidebar-nav-item href=/categories/reviews/ title=reviews>reviews</a></li><li><a class=sidebar-nav-item href=/categories/technology/ title=technology>technology</a></li></ul><aside class=toc><h4>On this page</h4><nav id=TableOfContents><ul><li><a href=#functional-complexity>Functional Complexity</a></li><li><a href=#technical-complexity>Technical Complexity</a></li><li><a href=#operational-complexity>Operational Complexity</a></li><li><a href=#unique-business-value>Unique Business Value</a></li><li><a href=#how-to-measure-cost-in-buy-vs-build>How to measure cost in Buy vs. Build</a></li><li><a href=#case-study-1-chat-server--build>Case Study 1: Chat Server – Build</a></li><li><a href=#case-study-2-log-platform--buy>Case Study 2: Log Platform – Buy</a></li><li><a href=#when-to-sell-what-you-build>When to Sell What You Build</a><ul><li><a href=#externally-relevant-differentiation>Externally Relevant Differentiation</a></li><li><a href=#cost-of-multi-tenancy>Cost of Multi-Tenancy</a></li></ul></li><li><a href=#conclusion>Conclusion</a></li></ul></nav></aside><div id=fastSearch><span id=cursor><input id=searchInput tabindex=0 placeholder=search></span><ul id=searchResults></ul></div></nav></div><div id=section2><p><a href=https://tahirhashmi.com/posts/>Articles</a></p></div><div id=logo><a href=/><svg id="svgLogo" baseProfile="full" xmlns="https://www.w3.org/2000/svg" viewBox="0 0 400 100" preserveAspectRatio="xMidYMid"><radialGradient id="logoGradient"><stop offset="30%" stop-color="#00ff80"/><stop offset="67%" stop-color="#00c000"/><stop offset="100%" stop-color="#606000"/></radialGradient><polygon points="0, 67 160, 0 200, 100 240, 0 400, 67 240, 33 200, 67 160, 33" fill="url(#logoGradient)"/></svg></a></div><div id=space><p>Tahir Hashmi</p></div><footer id=footer>mail@tahirhashmi.com
| <a href=https://flickr.com/photos/code_martial/>Flickr</a>
| <a href=https://github.com/codemartial>Github</a>
| <a href=https://www.linkedin.com/in/tahirhashmi>LinkedIn</a>
| <a href=https://twitter.com/code_martial>Twitter</a>
| <a href=https://tahirhashmi.com/posts/index.xml type=.mediatype.type rel=.rel>RSS</a> | &copy; 2022 Tahir Hashmi. All rights reserved.</footer><div class=splash></div><div class=glow></div></body></html>