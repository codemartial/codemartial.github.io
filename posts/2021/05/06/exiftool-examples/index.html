<!doctype html><html><head><meta charset=utf-8><meta name=viewport content="width=device-width"><title>exiftool Examples, by Tahir Hashmi</title><meta name=description content><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#da532c"><meta name=theme-color content="#ffffff"><link rel=canonical href=https://tahirhashmi.com/posts/2021/05/06/exiftool-examples/><link rel=alternate type=application/rss+xml href=https://tahirhashmi.com/index.xml><meta property="og:title" content="exiftool Examples"><meta property="og:description" content="Following is a collection of real exiftool commands that I’ve used, along with explanations of what each does. exiftool is a command-line utility that provides very powerful EXIF reading, writing and searching capabilities.
I’m writing this down because I often spend a lot of time reading through exiftool documentation to find out how to get something done, just to forget it within hours. All of these examples work on a Unix shell environment like ZSH on MacOS or the various Linux shells."><meta property="og:type" content="article"><meta property="og:url" content="https://tahirhashmi.com/posts/2021/05/06/exiftool-examples/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2021-05-06T06:24:35+00:00"><meta property="article:modified_time" content="2022-10-23T18:54:00+07:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="exiftool Examples"><meta name=twitter:description content="Following is a collection of real exiftool commands that I’ve used, along with explanations of what each does. exiftool is a command-line utility that provides very powerful EXIF reading, writing and searching capabilities.
I’m writing this down because I often spend a lot of time reading through exiftool documentation to find out how to get something done, just to forget it within hours. All of these examples work on a Unix shell environment like ZSH on MacOS or the various Linux shells."><meta itemprop=name content="exiftool Examples"><meta itemprop=description content="Following is a collection of real exiftool commands that I’ve used, along with explanations of what each does. exiftool is a command-line utility that provides very powerful EXIF reading, writing and searching capabilities.
I’m writing this down because I often spend a lot of time reading through exiftool documentation to find out how to get something done, just to forget it within hours. All of these examples work on a Unix shell environment like ZSH on MacOS or the various Linux shells."><meta itemprop=datePublished content="2021-05-06T06:24:35+00:00"><meta itemprop=dateModified content="2022-10-23T18:54:00+07:00"><meta itemprop=wordCount content="2305"><meta itemprop=keywords content="cataloguing,EXIF,exiftool,software,"><link rel=stylesheet href=/assets/css/main.min.0b9fdc833f830056187d4a84ac25043ce97917bf1479446615c45ecdc1e76a1b.css media=all></head><body class=page><div id=headline><h1>exiftool Examples</h1></div><div id=content><main><article><time datetime="2021-05-06 06:24:35 +0000 UTC" itemprop=datePublished>May 6, 2021</time><p>Following is a collection of real <a href=https://exiftool.org><code>exiftool</code></a> commands that I’ve used, along with explanations of what each does. <code>exiftool</code> is a command-line utility that provides very powerful EXIF reading, writing and searching capabilities.</p><p>I’m writing this down because I often spend a lot of time reading through exiftool documentation to find out how to get something done, just to forget it within hours. All of these examples work on a Unix shell environment like ZSH on MacOS or the various Linux shells.</p><h3 id=extractingexifinformation>Extracting EXIF Information</h3><p>What does EXIF data look like? Let’s try the following on an image file, <code>DSC09535.JPG</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>$ exiftool -all DSC09535.JPG
</span></span><span style=display:flex><span>ExifTool Version Number         : 11.59
</span></span><span style=display:flex><span>File Name                       : DSC09535.JPG
</span></span><span style=display:flex><span>Directory                       : .
</span></span><span style=display:flex><span>File Size                       : <span style=color:#ae81ff>11</span> MB
</span></span><span style=display:flex><span>File Modification Date/Time     : 2020:02:02 14:38:34+07:00
</span></span><span style=display:flex><span>File Access Date/Time           : 2020:07:26 09:11:20+07:00
</span></span><span style=display:flex><span>File Inode Change Date/Time     : 2020:05:05 11:41:44+07:00
</span></span><span style=display:flex><span>File Permissions                : rwxrwxrwx
</span></span><span style=display:flex><span>File Type                       : JPEG
</span></span><span style=display:flex><span>File Type Extension             : jpg
</span></span><span style=display:flex><span>MIME Type                       : image/jpeg
</span></span><span style=display:flex><span>Exif Byte Order                 : Little-endian <span style=color:#f92672>(</span>Intel, II<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>Image Description               :
</span></span><span style=display:flex><span>Make                            : SONY
</span></span><span style=display:flex><span>Camera Model Name               : DSC-RX10M3
</span></span><span style=display:flex><span>... <span style=color:#ae81ff>165</span> lines snipped ...
</span></span><span style=display:flex><span>Focal Length                    : 220.0 mm <span style=color:#f92672>(</span><span style=color:#ae81ff>35</span> mm equivalent: 600.0 mm<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>Hyperfocal Distance             : 1098.31 m
</span></span><span style=display:flex><span>Light Value                     : 5.9
</span></span></code></pre></div><p>This simplest exiftool invocation that dumps all EXIF data for the file. The default output shows tag descriptions and their readably formatted values. In order to see the actual tag names, use the <code>-s</code> option.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>$ exiftool -s -all DSC09535.JPG
</span></span><span style=display:flex><span>ExifToolVersion                 : 11.59
</span></span><span style=display:flex><span>FileName                        : DSC09535.JPG
</span></span><span style=display:flex><span>Directory                       : .
</span></span><span style=display:flex><span>FileSize                        : <span style=color:#ae81ff>11</span> MB
</span></span><span style=display:flex><span>FileModifyDate                  : 2020:02:02 14:38:34+07:00
</span></span><span style=display:flex><span>FileAccessDate                  : 2020:07:26 09:11:20+07:00
</span></span><span style=display:flex><span>FileInodeChangeDate             : 2020:05:05 11:41:44+07:00
</span></span><span style=display:flex><span>FilePermissions                 : rwxrwxrwx
</span></span><span style=display:flex><span>FileType                        : JPEG
</span></span><span style=display:flex><span>FileTypeExtension               : jpg
</span></span><span style=display:flex><span>MIMEType                        : image/jpeg
</span></span><span style=display:flex><span>ExifByteOrder                   : Little-endian <span style=color:#f92672>(</span>Intel, II<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>ImageDescription                :
</span></span><span style=display:flex><span>Make                            : SONY
</span></span><span style=display:flex><span>Model                           : DSC-RX10M3
</span></span><span style=display:flex><span>... <span style=color:#ae81ff>165</span> lines snipped ...
</span></span><span style=display:flex><span>FocalLength35efl                : 220.0 mm <span style=color:#f92672>(</span><span style=color:#ae81ff>35</span> mm equivalent: 600.0 mm<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>HyperfocalDistance              : 1098.31 m
</span></span><span style=display:flex><span>LightValue                      : 5.9
</span></span></code></pre></div><p>Now it becomes easier to query for specific values in a whole collection of files. For example, here’s how to list the 35mm equivalent focal length for all files in the current directory:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>$ exiftool -FocalLength35efl .
</span></span><span style=display:flex><span><span style=color:#f92672>========</span> ./DSC09535.JPG
</span></span><span style=display:flex><span>Focal Length                    : 220.0 mm <span style=color:#f92672>(</span><span style=color:#ae81ff>35</span> mm equivalent: 600.0 mm<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span><span style=color:#f92672>========</span> ./DSC09568.JPG
</span></span><span style=display:flex><span>Focal Length                    : 73.2 mm <span style=color:#f92672>(</span><span style=color:#ae81ff>35</span> mm equivalent: 200.0 mm<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span><span style=color:#f92672>========</span> ./DSC09540.JPG
</span></span><span style=display:flex><span>Focal Length                    : 220.0 mm <span style=color:#f92672>(</span><span style=color:#ae81ff>35</span> mm equivalent: 600.0 mm<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span><span style=color:#f92672>========</span> ./DSC09556.JPG
</span></span><span style=display:flex><span>Focal Length                    : 13.0 mm <span style=color:#f92672>(</span><span style=color:#ae81ff>35</span> mm equivalent: 35.0 mm<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span><span style=color:#f92672>========</span> ./DSC09550.JPG
</span></span><span style=display:flex><span>Focal Length                    : 220.0 mm <span style=color:#f92672>(</span><span style=color:#ae81ff>35</span> mm equivalent: 600.0 mm<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span><span style=color:#f92672>========</span> ./DSC09574_DxO.jpg
</span></span><span style=display:flex><span>Focal Length                    : 110.1 mm <span style=color:#f92672>(</span><span style=color:#ae81ff>35</span> mm equivalent: 300.0 mm<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span><span style=color:#f92672>========</span> ./7DX_0300_DxO.jpg
</span></span><span style=display:flex><span>Focal Length                    : 200.0 mm <span style=color:#f92672>(</span><span style=color:#ae81ff>35</span> mm equivalent: 300.0 mm<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span><span style=color:#f92672>========</span> ./DSC09574.JPG
</span></span><span style=display:flex><span>Focal Length                    : 110.1 mm <span style=color:#f92672>(</span><span style=color:#ae81ff>35</span> mm equivalent: 300.0 mm<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span><span style=color:#f92672>========</span> ./DSC09570.JPG
</span></span><span style=display:flex><span>Focal Length                    : 220.0 mm <span style=color:#f92672>(</span><span style=color:#ae81ff>35</span> mm equivalent: 600.0 mm<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span><span style=color:#f92672>========</span> ./DSC09564.JPG
</span></span><span style=display:flex><span>Focal Length                    : 110.1 mm <span style=color:#f92672>(</span><span style=color:#ae81ff>35</span> mm equivalent: 300.0 mm<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span><span style=color:#f92672>========</span> ./DSC09558.JPG
</span></span><span style=display:flex><span>Focal Length                    : 146.8 mm <span style=color:#f92672>(</span><span style=color:#ae81ff>35</span> mm equivalent: 400.0 mm<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span><span style=color:#f92672>========</span> ./7DX_0300.JPG
</span></span><span style=display:flex><span>Focal Length                    : 200.0 mm <span style=color:#f92672>(</span><span style=color:#ae81ff>35</span> mm equivalent: 300.0 mm<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span><span style=color:#f92672>========</span> ./DSC09539.JPG
</span></span><span style=display:flex><span>Focal Length                    : 220.0 mm <span style=color:#f92672>(</span><span style=color:#ae81ff>35</span> mm equivalent: 600.0 mm<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>1</span> directories scanned
</span></span><span style=display:flex><span>   <span style=color:#ae81ff>13</span> image files read
</span></span></code></pre></div><p>I often like to perform some quantitative analysis on my photo metadata, so it is helpful to start with data that can be imported into a spreadsheet. Luckily, <code>exiftool</code> can export the above data as CSV too. Example:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>$ exiftool -csv -Model -Aperture -ShutterSpeed -ISO <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>-FocalLengthIn35mmFormat . &gt; stats.csv
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>1</span> directories scanned
</span></span><span style=display:flex><span>   <span style=color:#ae81ff>13</span> image files read
</span></span><span style=display:flex><span>$ cat stats.csv
</span></span><span style=display:flex><span>SourceFile,Model,Aperture,ShutterSpeed,ISO,FocalLengthIn35mmFormat
</span></span><span style=display:flex><span>./DSC09535.JPG,DSC-RX10M3,4.0,1/60,1600,600 mm
</span></span><span style=display:flex><span>./DSC09568.JPG,DSC-RX10M3,4.0,1/30,64,200 mm
</span></span><span style=display:flex><span>./DSC09540.JPG,DSC-RX10M3,4.0,1/250,400,600 mm
</span></span><span style=display:flex><span>./DSC09556.JPG,DSC-RX10M3,4.0,1/25,64,35 mm
</span></span><span style=display:flex><span>./DSC09550.JPG,DSC-RX10M3,5.6,1/250,64,600 mm
</span></span><span style=display:flex><span>./DSC09574_DxO.jpg,DSC-RX10M3,4.0,1/1600,64,300 mm
</span></span><span style=display:flex><span>./7DX_0300_DxO.jpg,NIKON D7500,5.6,1/800,100,300 mm
</span></span><span style=display:flex><span>./DSC09574.JPG,DSC-RX10M3,4.0,1/1600,64,300 mm
</span></span><span style=display:flex><span>./DSC09570.JPG,DSC-RX10M3,4.0,1/30,64,600 mm
</span></span><span style=display:flex><span>./DSC09564.JPG,DSC-RX10M3,4.0,1/40,64,300 mm
</span></span><span style=display:flex><span>./DSC09558.JPG,DSC-RX10M3,4.0,1/125,64,400 mm
</span></span><span style=display:flex><span>./7DX_0300.JPG,NIKON D7500,5.6,1/800,100,300 mm
</span></span><span style=display:flex><span>./DSC09539.JPG,DSC-RX10M3,4.0,1/250,400,600 mm
</span></span></code></pre></div><p>If you don’t want the numeric values to be formatted, use the <code>-n</code> option to extract raw numbers. Example:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>$ exiftool -csv -n -Model -Aperture -ShutterSpeed -ISO <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>-FocalLengthIn35mmFormat .
</span></span><span style=display:flex><span>SourceFile,Model,Aperture,ShutterSpeed,ISO,FocalLengthIn35mmFormat
</span></span><span style=display:flex><span>./DSC09535.JPG,DSC-RX10M3,4,0.01666666667,1600,600
</span></span><span style=display:flex><span>./DSC09568.JPG,DSC-RX10M3,4,0.03333333333,64,200
</span></span><span style=display:flex><span>./DSC09540.JPG,DSC-RX10M3,4,0.004,400,600
</span></span><span style=display:flex><span>./DSC09556.JPG,DSC-RX10M3,4,0.04,64,35
</span></span><span style=display:flex><span>./DSC09550.JPG,DSC-RX10M3,5.6,0.004,64,600
</span></span><span style=display:flex><span>./DSC09574_DxO.jpg,DSC-RX10M3,4,0.000625,64,300
</span></span><span style=display:flex><span>./7DX_0300_DxO.jpg,NIKON D7500,5.6,0.00125,100,300
</span></span><span style=display:flex><span>./DSC09574.JPG,DSC-RX10M3,4,0.000625,64,300
</span></span><span style=display:flex><span>./DSC09570.JPG,DSC-RX10M3,4,0.03333333333,64,600
</span></span><span style=display:flex><span>./DSC09564.JPG,DSC-RX10M3,4,0.025,64,300
</span></span><span style=display:flex><span>./DSC09558.JPG,DSC-RX10M3,4,0.008,64,400 
</span></span><span style=display:flex><span>./7DX_0300.JPG,NIKON D7500,5.6,0.00125,100,300 ./DSC09539.JPG,DSC-RX10M3,4,0.004,400,600
</span></span></code></pre></div><p>As you can see, the shutter speed has changed from a fraction, like <code>1/25</code> to a floating point value like <code>0.04</code> and the <code>mm</code> unit has been dropped from the equivalent focal length field.</p><h3 id=updatingexifdata>Updating EXIF data</h3><p>One of my frequent requirements is to ensure that post-processed files have the right EXIF data. This is often needed when stitching panoramas or image stacks from multiple source images. The easiest way is to make <code>exiftool</code> copy the data from the corresponding raw file.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>exiftool -tagsfromfile ../../DSC_2177.NEF superblend*.jpg
</span></span></code></pre></div><p>Here, the <code>-tagsfromfile</code> option picks up all the EXIF data from the first file and overwrites it into the subsequent files.</p><p>Sometimes, a bad image editor might generate files with wrong EXIF data. The following example fixes such occurences by matching JPEG files against their corresponding raw (NEF) files and copying the data from the latter to the former.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span><span style=color:#66d9ef>for</span> c in <span style=color:#e6db74>`</span>ls -C1 *.jpg<span style=color:#e6db74>`</span>; <span style=color:#66d9ef>do</span>
</span></span><span style=display:flex><span>	exiftool -P -overwrite_original -tagsfromfile ../<span style=color:#e6db74>${</span>c/.jpg/.NEF<span style=color:#e6db74>}</span> $c;
</span></span><span style=display:flex><span><span style=color:#66d9ef>done</span>;
</span></span></code></pre></div><p>Note the two new options here:</p><ul><li><code>-P</code> is used to ensure that file modification date/time is not updated to the time when the command is executed</li><li><code>-overwrite_original</code> is used to modify the original file and not save a backup of the original (refer to <a href=https://exiftool.org/exiftool_pod.html>documentation</a> for more details)</li></ul><h4 id=datetimeadjustments>Date/Time Adjustments</h4><p>It’s really convenient to have the timestamp of the processed photos match the time when they were originally shot. However, some image processors export files with the latest timestamps. One example is Nikon Studio NX, that not only doesn’t adjust the modification time, but also adds a new EXIF tag for when the processed file was generated. Here’s how I fix this:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>exiftool -overwrite_original <span style=color:#e6db74>&#39;-FileModifyDate&lt;DateTimeOriginal&#39;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span><span style=color:#e6db74>&#39;-ModifyDate=&#39;</span> .
</span></span></code></pre></div><p>The above command operates on all files in the current directory (<code>.</code>), deletes the <code>ModifyDate</code> tag created by Studio NX and sets the actual file modification date (<code>FileModifyDate</code>) to the time when the picture was taken (<code>DateTimeOriginal</code>).</p><p>Another somewhat recurring requirement is to adjust all EXIF timestamps by some difference. This happens when I’m travelling with multiple cameras, whose clocks are not in sync, and sometimes I forget to match the timezone to that of the destination. Fortunately, it is really easy to make these adjustments with <code>exiftool</code>.</p><p>For example, the following shots were taken at the same time but with different cameras. Unfortunately, the clock of one camera was way off.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>$ exiftool -p <span style=color:#e6db74>&#39;$filename $DateTimeOriginal $Model&#39;</span> DSC09574.JPG 7DX_0300.JPG
</span></span><span style=display:flex><span>DSC09574.JPG 2020:05:03 13:31:50 DSC-RX10M3
</span></span><span style=display:flex><span>7DX_0300.JPG 2020:05:03 15:08:22 NIKON D7500
</span></span></code></pre></div><p>By the way, I have used formatted printing capability of <code>exiftool</code> here using the <code>-p</code> option, but I’m not going to discuss it here.</p><p>To get the correct time, I need to add 1 hour 36 minutes and 31 seconds to all photos from the <code>DSC-RX10M3</code> camera. Easy peasy. Here’s how:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>exiftool -alldates+<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;0:0:0 1:36:31&#34;</span> -if <span style=color:#e6db74>&#39;$Model eq &#34;DSC-RX10M3&#34;&#39;</span> .
</span></span></code></pre></div><p>Here we use the <code>alldates</code> tag, which is a shorthand for 3 different date fields, and shift it forward using <code>+=</code> operator by a delta represented as <code>Y:M:D h:m:s</code> for year, month, date, hour, minute, second respectively. To shift the date backward, we could use the <code>-=</code> operator instead.</p><p>The <code>-if</code> option is used to inspect tag values and only act on files where the values satisfy the condition in the expression. E.g. In the above example, the dates are adjusted only for files shot with “DSC-RX10M3” camera model.</p><h4 id=editingiptcmetadata>Editing IPTC Metadata</h4><p>Having been a <a href=https://www.flickr.com/photos/code_martial/>Flickr</a> user since 2004, I had been maintaining titles, descriptions, and keywords (Flickr “tags”) very carefully. After 15 long years, I decided I needed to have that metadata in my photo files offline too, and not just on Flickr.</p><p>One of the biggest challenges there was to maintain a consistent keyword set for cameras and lenses. I tag each of my photos with the body and lens that was used to click the photo.</p><p>Thankfully, <code>exiftool</code> comes in really handy for inspecting the camera and lens data from the original file and adding the appropriate keywords. Here’s how:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>exiftool -P -overwrite_original -addtagsfromfile @ <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span><span style=color:#e6db74>&#39;-keywords+&lt;${model;s/NIKON //;s/ //g}&#39;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span><span style=color:#e6db74>&#39;-keywords+&lt;${lensid;s/(AF-.|[A-Za-z]{3,}|ED)//g;s/\s+/ /g;s/^ *//;s/ *$//}&#39;</span>
</span></span></code></pre></div><p>Let’s break it down, option by option.</p><ul><li>The <code>-P</code> option ensures that the edited file has matching timestamps as the original</li><li>The <code>-overwrite_original</code> prevents creation of backup files</li><li>The <code>-addtagsfromfile</code> option is a variant of <code>-tagsfromfile</code> that allows repeated copying of values into the same tag to be appended rather than overwritten. This is important because here we are adding multiple values into the <code>keywords</code> tag</li><li><code>@</code> is a reference to the destination file as the source file too, since we are reading values from the same file and writing them back</li><li><code>-keywords</code> indicates that we’re editing the (IPTC) <code>keywords</code> tag</li><li><code>+</code> is to add to it and <code>&lt;</code> means to copy the value from the right hand side of the <code>&lt;</code> operator</li><li><code>${&lt;tag>;&lt;expr>[;&lt;expr>...]}</code> is a way to read <code>tag</code> and apply <code>expr</code> regex substitutions in it. E.g. in the first one, I need to strip <code>NIKON</code> and strip away whitespaces from the model name so <code>NIKON Z 6</code> would be tagged as <code>Z6</code> in the keywords.</li></ul><p>The last line is a bit more complicated due to the rules I follow to generate the lens keywords. The result is Model, Lens pairs in the keywords like this:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>D750, 70-200mm f/4G VR
</span></span><span style=display:flex><span>D7500, 300mm f/4E PF VR
</span></span><span style=display:flex><span>D7500, 500mm f/5.6E PF VR
</span></span><span style=display:flex><span>Z6, 500mm f/5.6E PF VR
</span></span><span style=display:flex><span>Z6, 70-200mm f/4G VR
</span></span><span style=display:flex><span>Z6, Z 24-70mm f/4 S
</span></span></code></pre></div><h4 id=afileimporttool>A File Import Tool</h4><p>One challenge with the above example for adding camera and lens tags was that as a stand-alone script, I had to remember to run it for every batch of files that I import. It would be a lot easier if the tags got applied automatically at the time of importing the photos in the first place. Thankfully, <code>exiftool</code> also provides features for file movement and copying. All I had to do was add one line at the end of the previous example.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span><span style=color:#75715e>#!/bin/zsh
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>exiftool -P -addtagsfromfile @ <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span><span style=color:#e6db74>&#39;-keywords+&lt;${model;s/NIKON //;s/ //g}&#39;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span><span style=color:#e6db74>&#39;-keywords+&lt;${lensid;s/(AF-.|[A-Za-z]{3,}|ED)//g;s/\s+/ /g;s/^ *//;s/ *$//}&#39;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span><span style=color:#e6db74>&#39;-Directory&lt;CreateDate&#39;</span> -o . -d $HOME/Pictures/%Y/%Y-%m -r $SOURCE
</span></span></code></pre></div><p>Let’s examine the parts of the last line.</p><ul><li><code>-Directory&lt;CreateDate</code> informs <code>exiftool</code> that we would be using data from <code>CreateDate</code> tag for synthesising the file destination path</li><li><code>-o .</code> indicates that we need to copy the files, rather than move them (seems to be a special case for this usage)</li><li><code>-d</code> provides the destination, in this case <code>$HOME/Pictures/</code> being the base directory under which subdirectories in the format of <code>YYYY/YY-MM</code> are created as specified by the <code>%Y/%Y-%m</code> format string.</li><li><code>-r $SOURCE</code> makes <code>exiftool</code> scan <code>$SOURCE</code> directory and its subdirectories for files to be copied. Please note that if any file doesn’t have the <code>CreateDate</code> tag in it, that file would not be copied.</li></ul><p>This command imports all <em>new</em> files into folders of the following structure, while also applying camera and lens tags and preserving the file timestamps as in the camera.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span> <span style=color:#ae81ff>2021</span>
</span></span><span style=display:flex><span> ├── 2021-01
</span></span><span style=display:flex><span> ├── 2021-02
</span></span><span style=display:flex><span> ├── 2021-03
</span></span><span style=display:flex><span> ├── 2021-04
</span></span><span style=display:flex><span> └── 2021-05
</span></span></code></pre></div><h3 id=searchingbyexifdata>Searching by EXIF data</h3><p>One of the most powerful uses of <code>exiftool</code> on a daily basis is being able to search through the images based on EXIF data. For example, I was interested in examining the general “look and feel” of photos shot in the medium telephoto field of view. One challenge was that the exact focal length for different format sensors would be different. Luckily, we have the <code>FocalLengthIn35mmFormat</code> tag that shows a normalised value of focal length.</p><p>Next, all I had to do was to list out all the photos that fell within a range, which I chose to be 105mm to 200mm. Here’s the command I used:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>exiftool <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>-if <span style=color:#e6db74>&#39;$FocalLengthIn35mmFormat# &gt;= 105&#39;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>-if <span style=color:#e6db74>&#39;$FocalLengthIn35mmFormat# &lt;= 200&#39;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>-p $PWD/<span style=color:#e6db74>&#39;$directory/$filename&#39;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>*/Finished &gt; teles.lst
</span></span></code></pre></div><p>Let’s go through this option by option.</p><ul><li>The first <code>-if</code> option checks whether the <code>FocalLengthIn35mmFormat</code> is >= 105mm. We need a numeric comparison here so the tag value needs to be extracted as a number rather than a string. There are two ways to do this. One is to append a <code>#</code> character at the end of the tag name, as we have done here. The other is to use the <code>-n</code> option to apply to all the tags.</li><li>The second <code>-if</code> option is very similar and checks whether <code>FocalLengthIn35mmFormat</code> is &lt;= 200mm.</li><li>The <code>-p</code> option is used to print the file names in a specific way – the first part is the full path of the present working directory as captured by <code>$PWD</code> followed by a trailing <code>/</code>. This is then followed by the directory in which the matching file was found using the <code>$directory</code> tag and lastly we print the <code>$filename</code> with a <code>/</code> between the two to make the complete path.</li><li>The search space is all the directories matching <code>*/Finished</code> path and the results are saved in a file called <code>teles.lst</code> This part is pure shell, nothing to do with <code>exiftool</code>.</li></ul><p>By the way, I used <a href=https://www.xnview.com/en/xnviewmp/>XnViewMP</a> to open the above file list as if it were a “virtual directory” containing all of those files, which then, among other things, allowed me to view a fullscreen slide show of all matching photos.</p><p>Another search example is a riff on the above, except I’m more interested in photos with a 30mm FoV +/- 5mm, but shot with a specific lens, which we match by a regex on the <code>LensId</code> tag.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>exiftool <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span> -if <span style=color:#e6db74>&#39;$FocalLengthIn35mmFormat# &gt; 25&#39;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span> -if <span style=color:#e6db74>&#39;$FocalLengthIn35mmFormat# &lt; 35&#39;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span> -if <span style=color:#e6db74>&#39;$LensId=~/24-70.*S/&#39;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span> -p $PWD/<span style=color:#e6db74>&#39;$directory/$filename $LensId&#39;</span> 2020-* &gt; zoom-30.lst
</span></span></code></pre></div><h3 id=closingthoughtsreferences>Closing Thoughts & References</h3><p>While I’ve verified all of the examples here to be working as per my usage, differences in our environments (most importantly, Operating Systems) might cause some of them to not work.</p><p>The explanations are my understanding of the official documentation and various forum posts. Please feel free to point out any inaccuracies that need correction.</p><p>For further information look at the <a href=https://exiftool.org/exiftool_pod.html><code>exiftool</code> documentation</a> or look through the <a href=https://exiftool.org/forum/>forum</a> for answers. There is also a vast collection of <a href=https://exiftool.org/#links>helpful resources</a>.</p></article><div style=display:flex;width:100%><div style=width:50%><p style=text-align:left>Previous Post:<br><a href=https://tahirhashmi.com/posts/2020/09/10/using-a-qlc-ssd-for-backups-makes-sense/>Using a QLC SSD for Backups. Am I Insane?</a></p></div><div style=width:50%><p style=text-align:right>Next Post:<br><a href=https://tahirhashmi.com/posts/fujifilm-x-e4/>Fujifilm X-E4: An Engaging Experience I'd Rather Not Have</a></p></div></div></main></div><div id=sidebar><nav class=sidebar-nav><ul><li><a class=sidebar-nav-item href=/posts/ title=Articles>Articles</a></li><li><a class=sidebar-nav-item href=/about/ title=About>About</a></li><li><a class=sidebar-nav-item href=/photos/ title=Photos>Photos</a></li><li><a class=sidebar-nav-item href=/categories/opinion/ title=opinion>opinion</a></li><li><a class=sidebar-nav-item href=/categories/photography/ title=photography>photography</a></li><li><a class=sidebar-nav-item href=/categories/programming/ title=programming>programming</a></li><li><a class=sidebar-nav-item href=/categories/reviews/ title=reviews>reviews</a></li><li><a class=sidebar-nav-item href=/categories/technology/ title=technology>technology</a></li></ul><aside class=toc><h4>On this page</h4><nav id=TableOfContents><ul><li><ul><li><a href=#extractingexifinformation>Extracting EXIF Information</a></li><li><a href=#updatingexifdata>Updating EXIF data</a></li><li><a href=#searchingbyexifdata>Searching by EXIF data</a></li><li><a href=#closingthoughtsreferences>Closing Thoughts & References</a></li></ul></li></ul></nav></aside></nav></div><div id=section2><p><a href=https://tahirhashmi.com/posts/>Articles</a></p></div><div id=logo><a href=/><svg id="svgLogo" baseProfile="full" xmlns="https://www.w3.org/2000/svg" viewBox="0 0 400 100" preserveAspectRatio="xMidYMid"><radialGradient id="logoGradient"><stop offset="30%" stop-color="#00ff80"/><stop offset="67%" stop-color="#00c000"/><stop offset="100%" stop-color="#606000"/></radialGradient><polygon points="0, 67 160, 0 200, 100 240, 0 400, 67 240, 33 200, 67 160, 33" fill="url(#logoGradient)"/></svg></a></div><div id=space><p>Tahir Hashmi</p></div><footer id=footer>mail@tahirhashmi.com
| <a href=https://flickr.com/photos/code_martial/>Flickr</a>
| <a href=https://github.com/codemartial>Github</a>
| <a href=https://www.linkedin.com/in/tahirhashmi>LinkedIn</a>
| <a href=https://twitter.com/code_martial>Twitter</a>
| <a href=https://tahirhashmi.com/index.xml>RSS</a>
| &copy; 2022 Tahir Hashmi. All rights reserved.</footer><div class=splash></div></body></html>